<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Power Up 3 ÂçïÂÖÉËØçÊ±áÂê¨ÂÜô</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 20px;
        }

        .container {
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
            padding: 40px;
            max-width: 800px;
            width: 100%;
        }

        h1 {
            color: #667eea;
            text-align: center;
            margin-bottom: 20px;
            font-size: 2.2em;
        }

        .day-selector {
            text-align: center;
            margin-bottom: 20px;
        }

        select {
            padding: 10px 20px;
            font-size: 1.1em;
            border-radius: 10px;
            border: 2px solid #667eea;
            color: #2d3748;
            outline: none;
            cursor: pointer;
            background: white;
            font-weight: bold;
            max-width: 100%;
        }

        .settings-row {
            display: flex;
            gap: 15px;
            justify-content: center;
            margin-bottom: 25px;
            flex-wrap: wrap;
            background: #f7fafc;
            padding: 15px;
            border-radius: 12px;
            border: 1px dashed #cbd5e0;
        }

        .setting-group {
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .setting-group label {
            color: #4a5568;
            font-weight: 600;
        }

        .setting-group select {
            padding: 8px 12px;
            font-size: 1rem;
            border: 1px solid #667eea;
        }

        .status {
            background: #f7fafc;
            border-radius: 10px;
            padding: 20px;
            margin-bottom: 30px;
            display: flex;
            justify-content: space-around;
            flex-wrap: wrap;
        }

        .status-item {
            display: flex;
            flex-direction: column;
            align-items: center;
            margin: 5px 10px;
        }

        .label {
            color: #718096;
            font-size: 0.9em;
            margin-bottom: 5px;
        }

        .value {
            color: #2d3748;
            font-weight: bold;
            font-size: 1.2em;
        }

        .progress {
            background: #e2e8f0;
            border-radius: 10px;
            height: 30px;
            margin-bottom: 30px;
            overflow: hidden;
            position: relative;
        }

        .progress-bar {
            background: linear-gradient(90deg, #667eea 0%, #764ba2 100%);
            height: 100%;
            width: 0%;
            transition: width 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: bold;
        }

        .current-word {
            text-align: center;
            font-size: 2.2em;
            font-weight: bold;
            color: #2d3748;
            margin: 40px 0;
            min-height: 100px;
            display: flex;
            align-items: center;
            justify-content: center;
            line-height: 1.2;
        }

        .starting {
            text-align: center;
            font-size: 1.5em;
            color: #667eea;
            margin: 40px 0;
            min-height: 100px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .controls {
            text-align: center;
            margin-top: 30px;
        }

        button {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            padding: 15px 40px;
            font-size: 1.2em;
            border-radius: 50px;
            cursor: pointer;
            transition: transform 0.2s;
            margin: 5px;
            box-shadow: 0 4px 6px rgba(50, 50, 93, 0.11), 0 1px 3px rgba(0, 0, 0, 0.08);
        }

        button:hover {
            transform: translateY(-2px);
            box-shadow: 0 7px 14px rgba(50, 50, 93, 0.1), 0 3px 6px rgba(0, 0, 0, 0.08);
        }

        button:disabled {
            background: #cbd5e0;
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
        }

        .preview {
            margin-top: 30px;
        }

        .preview-list {
            background: #f7fafc;
            border-radius: 10px;
            padding: 20px;
            border: 1px dashed #cbd5e0;
        }

        .answers {
            display: none;
            margin-top: 30px;
        }

        .answers h2 {
            color: #667eea;
            margin-bottom: 20px;
            text-align: center;
        }

        .answer-list {
            background: #f7fafc;
            border-radius: 10px;
            padding: 20px;
            max-height: 400px;
            overflow-y: auto;
        }

        .answer-item {
            padding: 12px;
            margin-bottom: 8px;
            background: white;
            border-radius: 5px;
            display: flex;
            align-items: center;
            justify-content: space-between;
            box-shadow: 0 1px 3px rgba(0,0,0,0.05);
        }

        .answer-left {
            display: flex;
            align-items: center;
            flex: 1;
        }

        .answer-number {
            color: #667eea;
            font-weight: bold;
            margin-right: 15px;
            min-width: 30px;
        }

        .answer-text {
            color: #2d3748;
            font-size: 1.7em;
            font-weight: 600;
        }

        .answer-meaning {
            color: #718096;
            font-size: 1.3em;
            text-align: right;
            margin-left: 10px;
            flex: 1;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>üéß Power Up 3 ÂçïÂÖÉËØçÊ±áÂê¨ÂÜô</h1>

        <div class="day-selector">
            <select id="daySelect" onchange="loadDay()"></select>
        </div>

        <div class="settings-row">
            <div class="setting-group">
                <label>ËØ≠ÈÄü:</label>
                <select id="speechRate">
                    <option value="1">Ê≠£Â∏∏</option>
                    <option value="0.9">Á®çÊÖ¢</option>
                    <option value="0.8" selected>ËæÉÊÖ¢</option>
                    <option value="0.7">ÂæàÊÖ¢</option>
                </select>
            </div>
            <div class="setting-group">
                <label>ÊØèËØçÊúóËØª:</label>
                <select id="repeatCount">
                    <option value="1">1Ê¨°</option>
                    <option value="2">2Ê¨°</option>
                    <option value="3" selected>3Ê¨°</option>
                </select>
            </div>
            <div class="setting-group">
                <label>ÂÜôÂ≠óÊó∂Èïø:</label>
                <select id="waitTime">
                    <option value="5">5Áßí</option>
                    <option value="8">8Áßí</option>
                    <option value="10" selected>10Áßí</option>
                    <option value="12">12Áßí</option>
                    <option value="15">15Áßí</option>
                </select>
            </div>
        </div>

        <div class="status">
            <div class="status-item">
                <span class="label">Êú¨ÁªÑËØçÊï∞</span>
                <span class="value" id="totalCount">0</span>
            </div>
            <div class="status-item">
                <span class="label">ÂΩìÂâçËøõÂ∫¶</span>
                <span class="value" id="currentProgress">0 / 0</span>
            </div>
        </div>

        <div class="progress">
            <div class="progress-bar" id="progressBar">0%</div>
        </div>

        <div class="current-word" id="currentWord" style="display: none;"></div>
        <div class="starting" id="starting">ÂáÜÂ§áÂºÄÂßã...</div>

        <div class="controls">
            <button id="startBtn" onclick="startDictation()">ÂºÄÂßãÂê¨ÂÜô</button>
            <button id="pauseBtn" onclick="pauseDictation()" style="display: none;" disabled>ÊöÇÂÅú</button>
            <button id="resumeBtn" onclick="resumeDictation()" style="display: none;">ÁªßÁª≠</button>
            <button id="restartBtn" onclick="resetDictation()" style="display: none; background: #e53e3e;">ÈáçÁΩÆ</button>
        </div>

        <div class="preview" id="previewArea">
            <div class="preview-list" id="previewList"></div>
        </div>

        <div class="answers" id="answers">
            <h2>üìù Âê¨ÂÜôÁ≠îÊ°à</h2>
            <div class="answer-list" id="answerList"></div>
        </div>
    </div>

    <script>
        // ËØçÊ±áÊï∞ÊçÆ (PU3)
        const wordData = {
            "Unit 1 ËØçÊ±á 1": [
                { "text": "in Russia", "meaning": "Âú®‰øÑÁΩóÊñØ" },
                { "text": "talk about meals", "meaning": "Ë∞àËÆ∫È£üÁâ©" },
                { "text": "meal times", "meaning": "Áî®È§êÊó∂Èó¥" },
                { "text": "half past twelve", "meaning": "12ÁÇπÂçä" },
                { "text": "seven o'clock", "meaning": "7ÁÇπÈíü" },
                { "text": "midnight", "meaning": "ÂçàÂ§ú" },
                { "text": "half past six", "meaning": "6ÁÇπÂçä" },
                { "text": "half past eight", "meaning": "8ÁÇπÂçä" },
                { "text": "eight o'clock", "meaning": "8ÁÇπÈíü" },
                { "text": "half past nine", "meaning": "9ÁÇπÂçä" },
                { "text": "midday", "meaning": "Ê≠£Âçà" },
                { "text": "What time is it?", "meaning": "Áé∞Âú®Âá†ÁÇπ?" },
                { "text": "It's half past twelve.", "meaning": "Áé∞Âú®ÊòØ12ÁÇπÂçä„ÄÇ" },
                { "text": "breakfast", "meaning": "Êó©È§ê" },
                { "text": "a snack", "meaning": "‰∏ÄÈ°øÂ∞èÂêÉ" },
                { "text": "lunch", "meaning": "ÂçàÈ§ê" },
                { "text": "dinner", "meaning": "ÊôöÈ§ê" },
                { "text": "wake up", "meaning": "Ëµ∑Â∫ä" },
                { "text": "go to bed", "meaning": "ÂéªÁù°Ëßâ" }
            ],
            "Unit 1 ËØçÊ±á 2": [
                { "text": "catch", "meaning": "Êäì‰Ωè" },
                { "text": "hop", "meaning": "ÂçïËÑöË∑≥" },
                { "text": "skip", "meaning": "Ë∑≥Áª≥" },
                { "text": "dance", "meaning": "Ë∑≥Ëàû" },
                { "text": "jump to your places", "meaning": "Ë∑≥Âà∞‰Ω†ÁöÑ‰ΩçÁΩÆ" },
                { "text": "practice time", "meaning": "ÁªÉ‰π†Êó∂Èó¥" },
                { "text": "Are you in or out?", "meaning": "‰Ω†ÊòØÂä†ÂÖ•ËøòÊòØÈÄÄÂá∫?" },
                { "text": "be quiet", "meaning": "‰øùÊåÅÂÆâÈùô" },
                { "text": "mustn't shout", "meaning": "Á¶ÅÊ≠¢Â§ßÂè´" },
                { "text": "don't laugh", "meaning": "‰∏çË¶ÅÁ¨ë" },
                { "text": "with a smile on your face", "meaning": "Èù¢Â∏¶ÂæÆÁ¨ë" },
                { "text": "hold her legs", "meaning": "Êäì‰ΩèÂ•πÁöÑËÖø" },
                { "text": "fall into the net", "meaning": "ËêΩÂÖ•ÁΩë‰∏≠" },
                { "text": "dress up", "meaning": "ÊâìÊâÆ" },
                { "text": "jump", "meaning": "Ë∑≥" },
                { "text": "climb", "meaning": "ÊîÄÁôª" }
            ],
            "Unit 2 ËØçÊ±á 1": [
                { "text": "in China", "meaning": "Âú®‰∏≠ÂõΩ" },
                { "text": "in the supermarket", "meaning": "Âú®Ë∂ÖÂ∏ÇÈáå" },
                { "text": "shop for food", "meaning": "‰π∞È£üÁâ©" },
                { "text": "tea", "meaning": "Ëå∂" },
                { "text": "cup", "meaning": "ÊùØ" },
                { "text": "coffee", "meaning": "ÂíñÂï°" },
                { "text": "milkshake", "meaning": "Â•∂Êòî" },
                { "text": "glass", "meaning": "ÊùØ" },
                { "text": "cereal", "meaning": "Ë∞∑Áâ©È£üÁâ©" },
                { "text": "sauce", "meaning": "ÈÖ±" },
                { "text": "pancake", "meaning": "ËñÑÁÖéÈ•º" },
                { "text": "noodles", "meaning": "Èù¢Êù°" },
                { "text": "strawberries", "meaning": "ËçâËéì" },
                { "text": "yogurt", "meaning": "ÈÖ∏Â•∂" },
                { "text": "a glass of milkshake", "meaning": "‰∏ÄÊùØÁâõÂ•∂" },
                { "text": "a cup of coffee", "meaning": "‰∏ÄÊùØÂíñÂï°" },
                { "text": "a bottle of chocolate sauce", "meaning": "‰∏ÄÁì∂Â∑ßÂÖãÂäõÈÖ±" },
                { "text": "a bowl of cereal", "meaning": "‰∏ÄÁ¢óË∞∑Áâ©È£üÁâ©" }
            ],
            "Unit 2 ËØçÊ±á 2": [
                { "text": "drove (drive) to town", "meaning": "ÂºÄËΩ¶ÂéªÂüéÈïá" },
                { "text": "the place where May grew (grow) up", "meaning": "May ÈïøÂ§ßÁöÑÂú∞Êñπ" },
                { "text": "the teacher who taught (teach) her", "meaning": "ÊïôËøáÂ•πÁöÑËÄÅÂ∏à" },
                { "text": "got (get) dressed up", "meaning": "Á©øË°£ÊâìÊâÆ" },
                { "text": "took (take) some photos", "meaning": "Êãç‰∏Ä‰∫õÁÖßÁâá" },
                { "text": "gave (give)", "meaning": "Áªô" },
                { "text": "climbed (climb)", "meaning": "ÊîÄÁôª" },
                { "text": "wrote (write) this song", "meaning": "ÂÜôËøôÈ¶ñÊ≠å" }
            ],
            "Unit 3 ËØçÊ±á 1": [
                { "text": "do exercise", "meaning": "ÂÅöËÆ≠ÁªÉ" },
                { "text": "on the beach", "meaning": "Âú®Êµ∑Êª©‰∏ä" },
                { "text": "bandage", "meaning": "Áª∑Â∏¶" },
                { "text": "knee", "meaning": "ËÜùÁõñ" },
                { "text": "stomach", "meaning": "ËÉÉ" },
                { "text": "shoulder", "meaning": "ËÇ©ËÜÄ" },
                { "text": "neck", "meaning": "ËÑñÂ≠ê" },
                { "text": "toe", "meaning": "ËÑöË∂æ" },
                { "text": "finger", "meaning": "ÊâãÊåá" },
                { "text": "elbow", "meaning": "ËÇòÈÉ®" },
                { "text": "back", "meaning": "ËÉåÈÉ®" }
            ],
            "Unit 3 ËØçÊ±á 2": [
                { "text": "is/am/are sick", "meaning": "ÁîüÁóÖ‰∫Ü" },
                { "text": "is/am/are ill", "meaning": "‰∏çËàíÊúç" },
                { "text": "be quick", "meaning": "Âø´ÁÇπ" },
                { "text": "What's the problem?", "meaning": "‰ªÄ‰πàÈóÆÈ¢ò?" },
                { "text": "What's the matter?", "meaning": "ÊÄé‰πà‰∫Ü?" },
                { "text": "have/has got a cough", "meaning": "Âí≥ÂóΩ" },
                { "text": "have/has got a temperature", "meaning": "ÂèëÁÉß" },
                { "text": "have/has got sore throat", "meaning": "ÂñâÂíôÁóõ" },
                { "text": "have/has got a cold", "meaning": "ÊÑüÂÜí" },
                { "text": "have/has got a backache", "meaning": "ËÉåÁóõ" },
                { "text": "My stomach hurts.", "meaning": "ÊàëÁöÑËÉÉÁóõ„ÄÇ" }
            ],
            "Unit 4 ËØçÊ±á 1": [
                { "text": "in India", "meaning": "Âú®Âç∞Â∫¶" },
                { "text": "star", "meaning": "ÊòüÊòü" },
                { "text": "jungle", "meaning": "‰∏õÊûó" },
                { "text": "world", "meaning": "‰∏ñÁïå" },
                { "text": "waterfall", "meaning": "ÁÄëÂ∏É" },
                { "text": "moon", "meaning": "Êúà‰∫Æ" },
                { "text": "sky", "meaning": "Â§©Á©∫" },
                { "text": "plant", "meaning": "Ê§çÁâ©" },
                { "text": "wave", "meaning": "Êµ∑Êµ™" },
                { "text": "island", "meaning": "Â≤õ" }
            ],
            "Unit 4 ËØçÊ±á 2": [
                { "text": "drove (drive) to the beach", "meaning": "ÂºÄËΩ¶ÂéªÊµ∑Êª©" },
                { "text": "sailed (sail) on the sea", "meaning": "Âú®Êµ∑‰∏äËà™Ë°å" },
                { "text": "threw (throw) our nets", "meaning": "ÊâîÊàë‰ª¨ÁöÑÁΩë" },
                { "text": "caught (catch) some fish", "meaning": "Êäì‰∫õÈ±º" },
                { "text": "bounced (bounce)", "meaning": "ÂºπË∑≥" },
                { "text": "hopped (hop)", "meaning": "ÂçïËÑöË∑≥Ë°å" },
                { "text": "skipped (skip)", "meaning": "Ë∑≥Áª≥" },
                { "text": "kicked (kick)", "meaning": "Ë∏¢" }
            ],
            "Unit 5 ËØçÊ±á 1": [
                { "text": "in Greece", "meaning": "Âú®Â∏åËÖä" },
                { "text": "wing", "meaning": "ÁøÖËÜÄ" },
                { "text": "striped", "meaning": "ÊúâÊù°Á∫πÁöÑ" },
                { "text": "spotted", "meaning": "ÊúâÊñëÁÇπÁöÑ" },
                { "text": "silver", "meaning": "Èì∂Ëâ≤ÁöÑ" },
                { "text": "bright", "meaning": "Êòé‰∫ÆÁöÑ" },
                { "text": "gold", "meaning": "ÈáëËâ≤ÁöÑ" },
                { "text": "light", "meaning": "Ê∑°Ëâ≤ÁöÑ" },
                { "text": "dark", "meaning": "ÊöóËâ≤ÁöÑ" }
            ],
            "Unit 5 ËØçÊ±á 2": [
                { "text": "make all day long", "meaning": "ÂÅö‰∏ÄÊï¥Â§©" },
                { "text": "plastic", "meaning": "Â°ëÊñô" },
                { "text": "wool", "meaning": "ÁæäÊØõ" },
                { "text": "wood", "meaning": "Êú®Êùê" },
                { "text": "cut them up", "meaning": "Êää‰ªñ‰ª¨Ââ™Á¢é" },
                { "text": "cut them out", "meaning": "ÂàáÂá∫Êù•" },
                { "text": "glue", "meaning": "ËÉ∂Ê∞¥" },
                { "text": "These scissors are made of metal.", "meaning": "ËøôÂâ™ÂàÄÊòØÈáëÂ±ûÂÅöÁöÑ„ÄÇ" },
                { "text": "This scarf is made of wool.", "meaning": "ËøôÊù°Âõ¥Â∑æÊòØÁæäÊØõÂÅöÁöÑ„ÄÇ" },
                { "text": "My box is made of plastic.", "meaning": "ÊàëÁöÑÁõíÂ≠êÊòØÂ°ëÊñôÂÅöÁöÑ„ÄÇ" },
                { "text": "My table's made of wood.", "meaning": "ÊàëÁöÑÊ°åÂ≠êÊòØÊú®Â§¥ÂÅöÁöÑ„ÄÇ" },
                { "text": "That crown is made of brown card.", "meaning": "ÁéãÂÜ†ÊòØÁî®Ê£ïËâ≤Âç°ÁâáÂÅöÁöÑ„ÄÇ" },
                { "text": "silver wings", "meaning": "Èì∂Ëâ≤ÁöÑÁøÖËÜÄ" }
            ],
            "Unit 6 ËØçÊ±á 1": [
                { "text": "in Turkey", "meaning": "Âú®ÂúüËÄ≥ÂÖ∂" },
                { "text": "geography", "meaning": "Âú∞ÁêÜ" },
                { "text": "history", "meaning": "ÂéÜÂè≤" },
                { "text": "sports", "meaning": "ËøêÂä®" },
                { "text": "maths", "meaning": "Êï∞Â≠¶" },
                { "text": "language", "meaning": "ËØ≠Ë®Ä" },
                { "text": "music", "meaning": "Èü≥‰πê" },
                { "text": "science", "meaning": "ÁßëÂ≠¶" },
                { "text": "IT", "meaning": "‰ø°ÊÅØÊäÄÊúØ" },
                { "text": "art", "meaning": "ÁæéÊúØ" }
            ],
            "Unit 6 ËØçÊ±á 2": [
                { "text": "laptop", "meaning": "Á¨îËÆ∞Êú¨ÁîµËÑë" },
                { "text": "apps", "meaning": "Â∫îÁî®ËΩØ‰ª∂" },
                { "text": "an e-book", "meaning": "‰∏ÄÊú¨ÁîµÂ≠ê‰π¶" },
                { "text": "a special rucksack", "meaning": "‰∏Ä‰∏™ÁâπÊÆäÁöÑÂ∏ÜÂ∏ÉËÉåÂåÖ" },
                { "text": "an online dictionary", "meaning": "‰∏ÄÊú¨Âú®Á∫øËØçÂÖ∏" },
                { "text": "bin", "meaning": "ÁÆ±Â≠ê" },
                { "text": "Internet", "meaning": "‰∫íËÅîÁΩë" },
                { "text": "find safe websites", "meaning": "Êü•ÊâæÂÆâÂÖ®ÁΩëÁ´ô" },
                { "text": "paste a photo or two", "meaning": "Á≤òË¥¥‰∏§Âº†ÁÖßÁâá" },
                { "text": "scissors", "meaning": "Ââ™ÂàÄ" },
                { "text": "glue", "meaning": "ËÉ∂" }
            ],
            "Unit 7 ËØçÊ±á 1": [
                { "text": "in Spain", "meaning": "Âú®Ë•øÁè≠Áâô" },
                { "text": "actor", "meaning": "ÊºîÂëò" },
                { "text": "waiter", "meaning": "ÊúçÂä°Âëò" },
                { "text": "cook", "meaning": "Âé®Â∏à" },
                { "text": "driver", "meaning": "È©æÈ©∂Âëò" },
                { "text": "journalist", "meaning": "ËÆ∞ËÄÖ" },
                { "text": "photographer", "meaning": "ÊëÑÂΩ±Â∏à" },
                { "text": "artist", "meaning": "Ëâ∫ÊúØÂÆ∂" },
                { "text": "designer", "meaning": "ËÆæËÆ°Â∏à" },
                { "text": "singer", "meaning": "Ê≠åÊâã" },
                { "text": "acrobat", "meaning": "ÊùÇÊäÄÊºîÂëò" }
            ],
            "Unit 7 ËØçÊ±á 2": [
                { "text": "What's he like?", "meaning": "‰ªñÊòØ‰ªÄ‰πàÊ†∑Â≠êÁöÑ?" },
                { "text": "interesting", "meaning": "ÊúâË∂£ÁöÑ" },
                { "text": "kind", "meaning": "ÂèãÂñÑÁöÑ" },
                { "text": "friendly", "meaning": "ÂèãÂ•ΩÁöÑ" },
                { "text": "clever", "meaning": "ËÅ™ÊòéÁöÑ" },
                { "text": "lazy", "meaning": "ÊáíÊÉ∞ÁöÑ" },
                { "text": "lovely", "meaning": "ÂèØÁà±ÁöÑ" },
                { "text": "unkind", "meaning": "‰∏çÂèãÂñÑ" },
                { "text": "unfriendly", "meaning": "‰∏çÂèãÂ•Ω" },
                { "text": "popular", "meaning": "Ê¨¢Ëøé" },
                { "text": "brave", "meaning": "ÂãáÊï¢ÁöÑ" }
            ],
            "Unit 8 ËØçÊ±á 1": [
                { "text": "city break", "meaning": "ÂüéÂ∏Ç‰ºëÊÅØ" },
                { "text": "in the USA", "meaning": "Âú®ÁæéÂõΩ" },
                { "text": "They're lost.", "meaning": "‰ªñ‰ª¨Ëø∑Ë∑Ø‰∫Ü" },
                { "text": "north", "meaning": "Âåó" },
                { "text": "east", "meaning": "‰∏ú" },
                { "text": "south", "meaning": "Âçó" },
                { "text": "west", "meaning": "Ë•ø" },
                { "text": "left", "meaning": "Â∑¶" },
                { "text": "right", "meaning": "Âè≥" },
                { "text": "straight on", "meaning": "‰∏ÄÁõ¥ÂêëÂâç" },
                { "text": "on road 95", "meaning": "Âú®95Âè∑ÂÖ¨Ë∑Ø‰∏ä" },
                { "text": "get to road 9", "meaning": "Âà∞Ëææ9Âè∑ÂÖ¨Ë∑Ø" }
            ],
            "Unit 8 ËØçÊ±á 2": [
                { "text": "airport", "meaning": "Êú∫Âú∫" },
                { "text": "buildings", "meaning": "Âª∫Á≠ëÁâ©" },
                { "text": "banks", "meaning": "Èì∂Ë°å" },
                { "text": "money", "meaning": "Èí±" },
                { "text": "post office", "meaning": "ÈÇÆÂ±Ä" },
                { "text": "buy some stamps", "meaning": "‰π∞‰∏Ä‰∫õÈÇÆÁ•®" },
                { "text": "chemist", "meaning": "ÂåñÂ≠¶ÂÆ∂" },
                { "text": "theatre", "meaning": "ÂâßÈô¢" },
                { "text": "visit a museum", "meaning": "ÂèÇËßÇ‰∏Ä‰∏™ÂçöÁâ©È¶Ü" },
                { "text": "near the university", "meaning": "Èù†ËøëÂ§ßÂ≠¶" },
                { "text": "a brilliant hotel", "meaning": "‰∏ÄÂÆ∂ÈùûÂ∏∏Ê£íÁöÑÈÖíÂ∫ó" },
                { "text": "restaurant", "meaning": "È§êÂéÖ" }
            ],
            "Unit 9 ËØçÊ±á 1": [
                { "text": "What's the hero called?", "meaning": "Ëã±ÈõÑÂè´‰ªÄ‰πàÂêçÂ≠ó?" },
                { "text": "in Mexico", "meaning": "Âú®Â¢®Ë•øÂì•" },
                { "text": "the comic book which he finished", "meaning": "‰ªñÁúãÂÆåÁöÑÊº´Áîª‰π¶" },
                { "text": "noisy", "meaning": "ÂêµÁöÑ" },
                { "text": "huge", "meaning": "Â∑®Â§ßÁöÑ" },
                { "text": "alone", "meaning": "Áã¨Ëá™‰∏Ä‰∫∫ÁöÑ" },
                { "text": "strange", "meaning": "Â•áÊÄ™" },
                { "text": "horrible", "meaning": "ÂèØÊÄï" },
                { "text": "little", "meaning": "Â∞èÁöÑ" },
                { "text": "lucky", "meaning": "Âπ∏Ëøê" },
                { "text": "excellent", "meaning": "‰ºòÁßÄ" },
                { "text": "special", "meaning": "ÁâπÂà´" }
            ],
            "Unit 9 ËØçÊ±á 2": [
                { "text": "This year's tour is over.", "meaning": "‰ªäÂπ¥ÁöÑÂ∑°ÊºîÁªìÊùü‰∫Ü„ÄÇ" },
                { "text": "pack all your boxes", "meaning": "ÊâìÂåÖ‰Ω†ÁöÑÊâÄÊúâÁõíÂ≠ê" },
                { "text": "the enormous tent", "meaning": "Â∑®Â§ßÁöÑÂ∏êÁØ∑" },
                { "text": "find my pyjamas", "meaning": "ÊâæÂà∞ÊàëÁöÑÁù°Ë°£" },
                { "text": "pack my trainers", "meaning": "ÊâìÂåÖÊàëÁöÑËøêÂä®Èûã" },
                { "text": "pack my suitcase", "meaning": "Êî∂ÊãæÊàëÁöÑÊâãÊèêÁÆ±" },
                { "text": "rucksack", "meaning": "Â∏ÜÂ∏ÉËÉåÂåÖ" },
                { "text": "make sandcastles by the sea", "meaning": "Âú®Êµ∑ËæπÂà∂‰ΩúÊ≤ôÂ†°" },
                { "text": "postcard", "meaning": "Êòé‰ø°Áâá" },
                { "text": "views of Mexico", "meaning": "Â¢®Ë•øÂì•È£éÊôØ" },
                { "text": "stamp", "meaning": "ÈÇÆÁ•®" },
                { "text": "the post office", "meaning": "ÈÇÆÂ±Ä" }
            ]
        };

        let currentDayWords = [];
        let currentIndex = 0;
        let isPaused = false;
        let isRunning = false;

        window.onload = function() {
            initDaySelector();
            loadDay();
        };

        function initDaySelector() {
            const select = document.getElementById('daySelect');
            const keys = Object.keys(wordData);
            
            keys.forEach(key => {
                const option = document.createElement('option');
                option.value = key;
                option.text = key + ` (${wordData[key].length} words)`;
                select.appendChild(option);
            });
        }

        function loadDay() {
            if (isRunning) {
                alert("ËØ∑ÂÖàÂÅúÊ≠¢ÂΩìÂâçÂê¨ÂÜôÂÜçÂàáÊç¢Â§©Êï∞ÔºÅ");
                const previousKey = Object.keys(wordData).find(key => wordData[key] === currentDayWords);
                if (previousKey) document.getElementById('daySelect').value = previousKey;
                return;
            }
            
            const selectedDay = document.getElementById('daySelect').value;
            currentDayWords = wordData[selectedDay];
            
            document.getElementById('totalCount').textContent = currentDayWords.length;
            document.getElementById('currentProgress').textContent = `0 / ${currentDayWords.length}`;
            document.getElementById('progressBar').style.width = '0%';
            document.getElementById('progressBar').textContent = '0%';
            
            resetUI();
            renderPreview();
        }

        function renderPreview() {
            const list = document.getElementById('previewList');
            list.innerHTML = '';
            currentDayWords.forEach((word, index) => {
                const item = document.createElement('div');
                item.className = 'answer-item';
                item.innerHTML = `
                    <div class="answer-left">
                        <span class="answer-number">${index + 1}.</span>
                        <span class="answer-text">${word.text}</span>
                    </div>
                    <span class="answer-meaning">${word.meaning}</span>
                `;
                list.appendChild(item);
            });
        }

        function resetUI() {
            document.getElementById('answers').style.display = 'none';
            document.getElementById('previewArea').style.display = 'block';
            document.getElementById('starting').style.display = 'flex';
            document.getElementById('starting').textContent = 'ÂáÜÂ§áÂ∞±Áª™ÔºåÁÇπÂáªÂºÄÂßã';
            document.getElementById('currentWord').style.display = 'none';
            document.getElementById('startBtn').style.display = 'inline-block';
            document.getElementById('pauseBtn').style.display = 'none';
            document.getElementById('resumeBtn').style.display = 'none';
            document.getElementById('restartBtn').style.display = 'none';
            document.getElementById('daySelect').disabled = false;
            document.getElementById('speechRate').disabled = false;
            document.getElementById('repeatCount').disabled = false;
            document.getElementById('waitTime').disabled = false;
        }

        function unlockAudio() {
            const u = new SpeechSynthesisUtterance("");
            window.speechSynthesis.speak(u);
        }

        async function startDictation() {
            if (!('speechSynthesis' in window)) {
                alert("ÊÇ®ÁöÑÊµèËßàÂô®‰∏çÊîØÊåÅËØ≠Èü≥ÊúóËØªÂäüËÉΩÔºåËØ∑‰ΩøÁî® Chrome/Edge/Safari Á≠âÁé∞‰ª£ÊµèËßàÂô®„ÄÇ");
                return;
            }

            unlockAudio();

            isRunning = true;
            currentIndex = 0;
            document.getElementById('daySelect').disabled = true;
            document.getElementById('speechRate').disabled = true;
            document.getElementById('repeatCount').disabled = true;
            document.getElementById('waitTime').disabled = true;
            document.getElementById('startBtn').style.display = 'none';
            document.getElementById('pauseBtn').style.display = 'inline-block';
            document.getElementById('pauseBtn').disabled = false;
            document.getElementById('restartBtn').style.display = 'none';
            document.getElementById('answers').style.display = 'none';
            document.getElementById('previewArea').style.display = 'none';

            const startingEl = document.getElementById('starting');
            startingEl.style.display = 'flex';
            
            for (let i = 3; i > 0; i--) {
                startingEl.textContent = `Âê¨ÂÜôÂ∞ÜÂú® ${i} ÁßíÂêéÂºÄÂßã...`;
                await sleep(1000);
            }
            startingEl.style.display = 'none';
            document.getElementById('currentWord').style.display = 'flex';

            for (let i = 0; i < currentDayWords.length; i++) {
                currentIndex = i;
                updateProgress();
                await dictateItem(i);
                
                while (isPaused) {
                    await sleep(100);
                }
            }

            finishDictation();
        }

        async function dictateItem(index) {
            const word = currentDayWords[index];
            const displayEl = document.getElementById('currentWord');
            
            const repeatCount = parseInt(document.getElementById('repeatCount').value);
            const waitTime = parseInt(document.getElementById('waitTime').value);

            displayEl.textContent = `ÂçïËØç ${index + 1}`;
            displayEl.style.color = "#2d3748";

            for (let r = 0; r < repeatCount; r++) {
                if (isPaused) return;
                
                await speak(word.text);
                
                if (r < repeatCount - 1) {
                    await sleep(1500);
                }
            }

            displayEl.style.color = "#718096";
            for (let t = waitTime; t > 0; t--) {
                if (isPaused) return;
                displayEl.textContent = `Á≠âÂæÖ ${t} Áßí...`;
                await sleep(1000);
            }
        }

        function speak(text) {
            return new Promise((resolve) => {
                const utterance = new SpeechSynthesisUtterance(text);
                utterance.lang = 'en-US';
                const selectedRate = document.getElementById('speechRate').value;
                utterance.rate = parseFloat(selectedRate);
                
                utterance.onend = () => {
                    resolve();
                };
                
                utterance.onerror = (e) => {
                    console.error("Speech error:", e);
                    resolve();
                };

                window.speechSynthesis.speak(utterance);
            });
        }

        function updateProgress() {
            const total = currentDayWords.length;
            const current = currentIndex + 1;
            const percentage = Math.round((current / total) * 100);
            
            document.getElementById('currentProgress').textContent = `${current} / ${total}`;
            const bar = document.getElementById('progressBar');
            bar.style.width = `${percentage}%`;
            bar.textContent = `${percentage}%`;
        }

        function pauseDictation() {
            isPaused = true;
            window.speechSynthesis.cancel();
            document.getElementById('pauseBtn').style.display = 'none';
            document.getElementById('resumeBtn').style.display = 'inline-block';
            document.getElementById('currentWord').textContent = "Â∑≤ÊöÇÂÅú";
        }

        function resumeDictation() {
            isPaused = false;
            document.getElementById('resumeBtn').style.display = 'none';
            document.getElementById('pauseBtn').style.display = 'inline-block';
        }

        function resetDictation() {
            window.speechSynthesis.cancel();
            isRunning = false;
            isPaused = false;
            resetUI();
            loadDay();
        }

        function finishDictation() {
            isRunning = false;
            document.getElementById('currentWord').textContent = "Âê¨ÂÜôÂÆåÊàêÔºÅ";
            document.getElementById('pauseBtn').style.display = 'none';
            document.getElementById('restartBtn').style.display = 'inline-block';
            document.getElementById('daySelect').disabled = false;
            document.getElementById('speechRate').disabled = false;
            document.getElementById('repeatCount').disabled = false;
            document.getElementById('waitTime').disabled = false;
            document.getElementById('previewArea').style.display = 'none';
            
            showAnswers();
        }

        function showAnswers() {
            const list = document.getElementById('answerList');
            list.innerHTML = '';
            
            currentDayWords.forEach((word, index) => {
                const item = document.createElement('div');
                item.className = 'answer-item';
                item.innerHTML = `
                    <div class="answer-left">
                        <span class="answer-number">${index + 1}.</span>
                        <span class="answer-text">${word.text}</span>
                    </div>
                    <span class="answer-meaning">${word.meaning}</span>
                `;
                list.appendChild(item);
            });

            document.getElementById('answers').style.display = 'block';
            document.getElementById('answers').scrollIntoView({ behavior: 'smooth' });
        }

        function sleep(ms) {
            return new Promise(resolve => setTimeout(resolve, ms));
        }
    </script>
</body>
</html>
